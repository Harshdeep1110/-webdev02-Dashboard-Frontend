document.addEventListener("DOMContentLoaded", function () { initApp() }); function initApp() { loadTheme(), loadFromStorage() || (AppState.columns = getDefaultColumns(), AppState.cards = getDefaultCards(AppState.columns), AppState.activityLog = [], addActivity("Initialized new board")), setupEventListeners(), setupModalHandlers(), setupBoardDragHandlers(), renderBoard(), updateActivityBadge() } function setupEventListeners() { var a = document.getElementById("searchInput"); a.addEventListener("input", function (a) { AppState.searchQuery = a.target.value, renderBoard() }), document.getElementById("darkModeToggle").addEventListener("click", function () { AppState.darkMode = !AppState.darkMode, document.documentElement.setAttribute("data-theme", AppState.darkMode ? "dark" : "light"), saveTheme() }); var b = document.getElementById("activityPanel"); document.getElementById("activityToggle").addEventListener("click", function () { b.classList.toggle("open"), b.classList.contains("open") && renderActivityLog() }), document.getElementById("closeActivity").addEventListener("click", function () { b.classList.remove("open") }), document.getElementById("clearActivity").addEventListener("click", function () { AppState.activityLog = [], updateActivityBadge(), renderActivityLog(), autoSave() }), document.getElementById("addColumnBtn").addEventListener("click", function () { openColumnModal() }) } window.onresize = function () { renderBoard() };
