function initDragEvent(a) { a.addEventListener("dragstart", function (b) { AppState.dragState.dragging = !0, AppState.dragState.cardId = b.target.closest(".card").dataset.id, AppState.dragState.sourceCol = b.target.closest(".card-list").dataset.colId, b.target.classList.add("dragging"), b.dataTransfer.setData("text/plain", AppState.dragState.cardId), b.dataTransfer.effectAllowed = "move", document.querySelectorAll(".card-list").forEach(function (a) { a.classList.add("drop-target") }) }), a.addEventListener("dragend", function (b) { b.target.classList.remove("dragging"), AppState.dragState.dragging = !1, document.querySelectorAll(".card-list").forEach(function (a) { a.classList.remove("drop-target"), a.classList.remove("drag-over") }) }) } function setupBoardDragHandlers() { var a = document.getElementById("board"); a && (a.addEventListener("dragover", function (b) { b.preventDefault(); var c = b.target.closest(".card-list"); c && c.classList.add("drag-over") }), a.addEventListener("dragleave", function (b) { var c = b.target.closest(".card-list"); c && c.classList.remove("drag-over") }), a.addEventListener("drop", function (b) { b.preventDefault(); var c = b.target.closest(".card-list"); if (c) { var d = b.dataTransfer.getData("text/plain"), e = c.dataset.colId; moveCard(d, e) } })) } function moveCard(a, b) { if (AppState.cards[a]) { var c = AppState.cards[a].columnId; AppState.cards[a].columnId = b, reorderCards(c), reorderCards(b), addActivity("Moved card to " + b), autoSave(), renderBoard() } }
